<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Vini Bank</title>

<!-- Ãcone para instalar no celular -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='48' fill='%23820ad1'/><text x='50' y='50' text-anchor='middle' dominant-baseline='middle' font-size='48' fill='white' font-family='Arial' font-weight='bold'>VB</text></svg>">
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='48' fill='%23820ad1'/><text x='50' y='50' text-anchor='middle' dominant-baseline='middle' font-size='48' fill='white' font-family='Arial' font-weight='bold'>VB</text></svg>">

<style>
body {
  font-family: 'Segoe UI', Arial;
  background: linear-gradient(160deg, #f3f0ff, #eef2ff);
  margin: 0;
}

.header {
  background: linear-gradient(135deg, #6b00ad, #9b1fe8);
  color: white;
  padding: 24px;
  box-shadow: 0 4px 12px rgba(130,10,209,0.25);
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.logo span {
  font-weight: bold;
  font-size: 19px;
}

.container {
  max-width: 440px;
  margin: auto;
}

.nome { font-size: 15px; }
.saldo { font-size: 28px; font-weight: bold; margin-top: 6px; }

.card {
  background: white;
  margin: 14px;
  padding: 16px;
  border-radius: 16px;
  box-shadow: 0 6px 14px rgba(0,0,0,0.08);
}

.tabs {
  display: flex;
  margin: 14px;
  gap: 6px;
  background: white;
  padding: 6px;
  border-radius: 14px;
}

.tab {
  flex: 1;
  text-align: center;
  padding: 10px 6px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  font-size: 13px;
}

.tab.ativa { background: #820ad1; color: white; }

.linha {
  display: flex;
  justify-content: space-between;
  padding: 13px 4px;
  border-bottom: 1px solid #f0f0f0;
}

.linha:last-child { border-bottom: none; }

.data { font-size: 13px; color: #666; }

.valor-entrada {
  color: #007a5a;
  font-weight: bold;
  background: #e6fff4;
  padding: 4px 8px;
  border-radius: 8px;
}

.valor-saida {
  color: #c00000;
  font-weight: bold;
  background: #ffecec;
  padding: 4px 8px;
  border-radius: 8px;
}

.oculto { display: none; }
</style>
</head>
<body>

<div class="header">
  <div class="container">
    <div class="logo">
      <svg width="32" height="32" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="48" fill="#fff" opacity="0.15"/>
        <circle cx="50" cy="50" r="38" fill="white"/>
        <text x="50" y="50" text-anchor="middle" dominant-baseline="middle" font-size="34" font-weight="bold" fill="#820ad1">VB</text>
      </svg>
      <span>Vini Bank</span>
    </div>

    <div class="nome">OlÃ¡, Enzo ðŸ‘‹</div>
    <div>Saldo disponÃ­vel</div>
    <div class="saldo" id="saldo">R$ 0,00</div>
  </div>
</div>

<div class="container">

  <div class="tabs">
    <div class="tab ativa" onclick="mostrar('mov')" id="tMov">Extrato</div>
    <div class="tab" onclick="mostrar('graf')" id="tGraf">Crescimento</div>
    <div class="tab" onclick="mostrar('prev')" id="tPrev">PrevisÃ£o</div>
    <div class="tab" onclick="mostrar('aula')" id="tAula">O que Ã© juros?</div>
  </div>

  <div id="aula" class="card oculto">
    <strong>Juros explicados para o Enzo ðŸ˜Š</strong>
    <p>Juros Ã© como um prÃªmio por deixar o dinheiro guardado.</p>
    <p>Se vocÃª guarda R$10 e rende 5% ao mÃªs, vira R$10,50.</p>
  </div>

  <div id="mov" class="card">
    <strong>MovimentaÃ§Ãµes</strong>
    <div id="lista"></div>
  </div>

  <div id="graf" class="card oculto">
    <strong>EvoluÃ§Ã£o do dinheiro</strong>
    <canvas id="chart"></canvas>
  </div>

  <div id="prev" class="card oculto">
    <strong>Quanto pode virar?</strong>
    <div id="previsoes"></div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const movimentos = [
  { data: '2025-12-25', credito: 80, debito: 0 }
];

function formatarData(data) {
  const [y, m, d] = data.split('-');
  return `${d}/${m}/${y}`;
}

function mesesAteHoje(data) {
  const d = new Date(data);
  const h = new Date();
  return (h.getFullYear() - d.getFullYear()) * 12 + (h.getMonth() - d.getMonth());
}

function aplicarJuros(valor, meses) {
  return valor * Math.pow(1.05, meses);
}

function render() {
  let saldo = 0;
  const lista = document.getElementById('lista');
  lista.innerHTML = '';

  movimentos.forEach(m => {
    // Exibe apenas valor original
    const entrada = m.credito;
    const saida = m.debito;

    // Juros entram somente no saldo total
    saldo += aplicarJuros(m.credito, mesesAteHoje(m.data));
    saldo -= m.debito;

    const div = document.createElement('div');
    div.className = 'linha';

    div.innerHTML = `
      <div class='data'>${formatarData(m.data)}</div>
      <div>
        ${m.credito 
          ? `<span class='valor-entrada'>+ R$ ${entrada.toFixed(2)}</span>`
          : `<span class='valor-saida'>- R$ ${saida.toFixed(2)}</span>`}
      </div>`;

    lista.appendChild(div);
  });

  document.getElementById('saldo').innerText = 'R$ ' + saldo.toFixed(2);

  desenharGrafico();
  atualizarPrevisoes();
}

function calcularSerie() {
  if (movimentos.length === 0) return [];

  const ordenar = [...movimentos].sort((a,b) => new Date(a.data) - new Date(b.data));
  const inicio = new Date(ordenar[0].data);
  const hoje = new Date();

  let cursor = new Date(inicio.getFullYear(), inicio.getMonth(), 1);
  let saldoBase = 0;
  const pontos = [];

  while (cursor <= hoje) {
    movimentos.forEach(m => {
      const d = new Date(m.data);
      if (d.getFullYear() === cursor.getFullYear() && d.getMonth() === cursor.getMonth()) {
        saldoBase += m.credito;
        saldoBase -= m.debito;
      }
    });

    const meses = (cursor.getFullYear() - inicio.getFullYear()) * 12 + (cursor.getMonth() - inicio.getMonth());
    const saldoComJuros = aplicarJuros(saldoBase, meses);

    const dataLabel = `${String(cursor.getMonth()+1).padStart(2,'0')}/${cursor.getFullYear()}`;
    pontos.push({ data: dataLabel, saldo: saldoComJuros });

    cursor.setMonth(cursor.getMonth() + 1);
  }

  return pontos;
}

let grafico;

function desenharGrafico() {
  const pontos = calcularSerie();
  const ctx = document.getElementById('chart');

  if (grafico) grafico.destroy();

  grafico = new Chart(ctx, {
    type: 'line',
    data: {
      labels: pontos.map(p => p.data),
      datasets: [{
        label: 'Saldo com juros',
        data: pontos.map(p => p.saldo.toFixed(2)),
        borderColor: '#820ad1',
        backgroundColor: 'rgba(130,10,209,0.1)',
        fill: true,
        tension: 0.25
      }]
    },
    options: { plugins: { legend: { display: false } } }
  });
}

function calcularSaldoAtual() {
  let saldo = 0;
  movimentos.forEach(m => {
    saldo += aplicarJuros(m.credito, mesesAteHoje(m.data));
    saldo -= m.debito;
  });
  return saldo;
}

function atualizarPrevisoes() {
  const base = calcularSaldoAtual();
  const caixa = document.getElementById('previsoes');

  const prazos = [3,6,12,24];

  caixa.innerHTML = prazos.map(m => {
    const futuro = aplicarJuros(base, m);
    return `<div class='linha'>
      <div>Em ${m} meses</div>
      <div class='valor-entrada'>R$ ${futuro.toFixed(2)}</div>
    </div>`;
  }).join('');
}

function mostrar(id) {
  ['mov','graf','prev','aula'].forEach(p => 
    document.getElementById(p).classList.add('oculto')
  );

  document.getElementById(id).classList.remove('oculto');

  ['tMov','tGraf','tPrev','tAula'].forEach(t =>
    document.getElementById(t).classList.remove('ativa')
  );

  document.getElementById(
    id === 'mov' ? 'tMov' : id === 'graf' ? 'tGraf' : id === 'prev' ? 'tPrev' : 'tAula'
  ).classList.add('ativa');
}

// inicializaÃ§Ã£o
render();
</script>

</body>
</html>
